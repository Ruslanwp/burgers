(this["webpackJsonphot-burgers-site"]=this["webpackJsonphot-burgers-site"]||[]).push([[0],{22:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(23),s=n.n(a),r=n(9),u=(n(22),n(21)),o=n(18),d=n.n(o),l=n(3),j=n(24),b=n(10),O=n(4),p=(n(34),n(27)),m=n(25),h=n(0),x=function(){return Object(h.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:[Object(h.jsxs)("div",{className:"navbar-brand",children:[Object(h.jsx)("a",{className:"navbar-item",href:"https://bulma.io",children:Object(h.jsx)("img",{src:"https://e7.pngegg.com/pngimages/380/965/png-clipart-mcdonald-s-golden-arches-logo-mcdonalds-thumbnail.png",height:"80px",width:"80px",alt:"3"})}),Object(h.jsxs)("a",{href:"/",role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",children:[Object(h.jsx)("span",{"aria-hidden":"true"}),Object(h.jsx)("span",{"aria-hidden":"true"}),Object(h.jsx)("span",{"aria-hidden":"true"})]})]}),Object(h.jsx)("div",{id:"navbarBasicExample",className:"navbar-menu",children:Object(h.jsx)("div",{className:"navbar-end",children:Object(h.jsx)("div",{className:"navbar-item",children:Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)(r.b,{to:"/",className:"button is-rounded is-primary",children:Object(h.jsx)("strong",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"})}),Object(h.jsx)(r.b,{to:"/addings",className:"button is-primary is-rounded",children:Object(h.jsx)("strong",{children:"\u041c\u0435\u043d\u044e"})}),Object(h.jsxs)(r.b,{to:"/bucket",className:"button is-rounded is-warning",children:[Object(h.jsx)("strong",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(h.jsx)(m.a,{icon:p.a})]})]})})})})]})},g=function(e){var t=e.product,n=e.onProductAdd,c=t.toppings.reduce((function(e,t){return e+t.price*t.quantity}),0);return Object(h.jsxs)("div",{className:"card is-align-content-center has-background-success-light",children:[Object(h.jsx)("div",{className:"card-image",children:Object(h.jsx)("figure",{className:"image is-4by3",children:Object(h.jsx)("img",{src:t.url,alt:"Placeholder"})})}),Object(h.jsx)("footer",{className:"card-footer",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:Object(h.jsx)("strong",{children:t.name})}),Object(h.jsx)("p",{className:"py-3",children:"\u0426\u0435\u043d\u0430: ".concat(c," \u0433\u0440\u043d")}),Object(h.jsx)("button",{type:"button",className:"button is-rounded is-warning",onClick:function(){return n(t)},children:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})]},t.id)},f=i.a.memo((function(e){var t=e.products,n=e.onProductAdd,c=e.filterType,i=e.filterHandler;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"select",children:Object(h.jsxs)("select",{id:"select",value:c,onChange:function(e){return i(e.target.value)},children:[Object(h.jsx)("option",{value:"all",children:"\u0432\u0441\u0435"}),Object(h.jsx)("option",{value:"dessert",children:"\u0434\u0435\u0441\u0435\u0440\u0442\u044b"}),Object(h.jsx)("option",{value:"burger",children:"\u0431\u0443\u0440\u0433\u0435\u0440\u044b"}),Object(h.jsx)("option",{value:"beverage",children:"\u043d\u0430\u043f\u0438\u0442\u043a\u0438"}),Object(h.jsx)("option",{value:"salad",children:"\u0441\u0430\u043b\u0430\u0442\u044b"})]})}),Object(h.jsx)("div",{className:"main-cards",children:0!==t.length&&t.map((function(e){return Object(h.jsx)(g,{onProductAdd:n,product:e},e.id)}))})]})})),v=(n(46),function(e){var t=e.userOrder,n=e.onDecreaseQuantity,c=e.onIncreaseQuantity,i=e.onDelete,a=e.onReset;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("ul",{children:t.map((function(e){return Object(h.jsxs)("li",{className:"columns products has-background-light",children:[Object(h.jsx)("div",{className:"column product is-size-4",children:e.name}),Object(h.jsx)("div",{className:"column product is-size-5",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e ".concat(e.quantity)}),Object(h.jsx)("div",{className:"column product is-size-5",children:"\u0446\u0435\u043d\u0430 ".concat(e.toppings.reduce((function(t,n){return t+n.quantity*n.price*e.quantity}),0)," \u0433\u0440\u043d")}),Object(h.jsx)("button",{className:"button is-rounded",type:"button",onClick:function(){0!==e.quantity?n(e):i(e)},children:"-"}),Object(h.jsx)("figure",{className:"image is-128x128 m-5",children:Object(h.jsx)("img",{className:"is-rounded",src:e.url,alt:"/"})}),Object(h.jsx)("button",{className:"button is-rounded",type:"button",onClick:function(){return c(e)},children:"+"})]},e.id)}))}),Object(h.jsx)(r.b,{to:"/",className:"button is-success is-rounded mt-5",type:"button",onClick:function(){return a([])},children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]})}),y=function(){return Object(h.jsxs)("article",{className:"message is-dark mt-5",children:[Object(h.jsx)("div",{className:"message-header",children:Object(h.jsx)("p",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"})}),Object(h.jsxs)("div",{className:"message-body",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430,"," ",Object(h.jsx)("strong",{children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442!"})]})]})},N=(n(47),n(28)),q=n.n(N),k=function(e){var t=e.selectedProduct,n=e.chooseProduct,c=e.addToping,i=e.removeTopping,a=e.onOrderChange,s=e.onDelete;return Object(h.jsxs)("div",{className:q()("modal",{"is-active":t.id}),children:[Object(h.jsx)("div",{className:"modal-background"}),Object(h.jsxs)("div",{className:"modal-card",children:[Object(h.jsxs)("header",{className:"modal-card-head",children:[Object(h.jsx)("p",{className:"modal-card-title",children:t.name}),Object(h.jsx)("button",{onClick:function(){return n(null)},className:"delete",type:"button","aria-label":"close"})]}),Object(h.jsxs)("section",{className:"modal-card-body",children:[Object(h.jsx)("img",{className:"image is-128x128",src:t.url,alt:""}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"ingridients",children:[t.toppings&&t.toppings.map((function(e){return Object(h.jsxs)("div",{className:"ingridient",children:[Object(h.jsx)("span",{className:"ingridient__text",children:e.name}),Object(h.jsx)("span",{children:0===e.quantity?"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e":"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e ".concat(e.quantity)}),Object(h.jsx)("span",{children:"".concat(e.price*e.quantity," \u0433\u0440\u043d")}),Object(h.jsxs)("div",{className:"ingridient__control",children:[Object(h.jsx)("button",{className:"button is-rounded",type:"button",onClick:function(){return i(t,e)},children:"-"}),Object(h.jsx)("img",{className:"image is-96x96",src:e.image,alt:""}),Object(h.jsx)("button",{className:"button is-rounded",type:"button",onClick:function(){return c(t,e)},children:"+"})]})]},e.id)})),Object(h.jsxs)("div",{className:"is-size-3",children:[t.toppings.reduce((function(e,t){return e+t.quantity*t.price}),0)," \u0433\u0440\u043d"]})]})})]}),Object(h.jsxs)("footer",{className:"modal-card-foot",children:[Object(h.jsx)("button",{type:"button",className:"button is-success",onClick:function(){if(t.toppings.every((function(e){return 0===e.quantity})))return s(t),void n(null);a(t),n(null)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(h.jsx)("button",{type:"button",className:"button",onClick:function(){return n(null)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})]})},C=function(e){var t=e.userOrder,n=e.onOrderChange,a=e.onDelete,s=Object(c.useState)(null),u=Object(b.a)(s,2),o=u[0],d=u[1],j=t.map((function(e){return e.toppings.reduce((function(t,n){return t+n.price*n.quantity*e.quantity}),0)})).reduce((function(e,t){return e+t}),0),O=function(e){if(null!==e){var n=t.find((function(t){return t.id===e.id}));void 0!==n&&d(n)}else d(null)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"container order-cards",children:t.map((function(e){return Object(h.jsx)(i.a.Fragment,{children:Object(h.jsxs)("div",{className:"card-order-cell",children:[Object(h.jsxs)("div",{className:"card-image",children:[Object(h.jsx)("img",{src:e.url,alt:"Placeholder",width:"180px"}),Object(h.jsx)("div",{children:Object(h.jsx)("strong",{children:e.name})})]}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"\u0446\u0435\u043d\u0430  ".concat(e.toppings.reduce((function(t,n){return t+n.price*n.quantity*e.quantity}),0)," \u0433\u0440\u043d")})}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ".concat(e.quantity)})}),Object(h.jsx)("button",{type:"button",className:"button is-rounded is-warning",onClick:function(){return O(e)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})]})},e.id)}))}),null!==o&&Object(h.jsx)(k,{selectedProduct:o,chooseProduct:O,addToping:function(e,t){d(Object(l.a)(Object(l.a)({},e),{},{toppings:e.toppings.map((function(e){return e.id===t.id?Object(l.a)(Object(l.a)({},e),{},{quantity:e.quantity+1}):e}))}))},removeTopping:function(e,t){d(Object(l.a)(Object(l.a)({},e),{},{toppings:e.toppings.map((function(e){return e.id===t.id&&0!==e.quantity?Object(l.a)(Object(l.a)({},e),{},{quantity:e.quantity-1}):e}))}))},onOrderChange:n,onDelete:a}),Object(h.jsx)("div",{className:"py-5",children:"\u041e\u0431\u0449\u0438\u0439 \u0441\u0447\u0435\u0442 ".concat(j," \u0433\u0440\u043d")}),Object(h.jsx)(r.b,{to:"/bucket",className:"button is-success",type:"button",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})},P=function(e){return fetch("".concat("http://localhost:8000","/").concat(e,"/")).then((function(e){return e.json()}))},w=function(e){return P(e)},D=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)([]),s=Object(b.a)(a,2),r=s[0],o=s[1],p=Object(c.useState)([]),m=Object(b.a)(p,2),g=m[0],N=m[1],q=Object(c.useState)("all"),k=Object(b.a)(q,2),D=k[0],S=k[1],T=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,c,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(r="products",P(r)),w("ingredients")]);case 2:t=e.sent,n=Object(b.a)(t,2),c=n[0],a=n[1],N(a),s=c.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{quantity:1,toppings:e.ingredients.reduce((function(e,t){var n=e.find((function(e){return e.id===t}));return n?n.quantity+=1:e.push({id:t,quantity:1}),e}),[]).map((function(e){return Object(l.a)({quantity:e.quantity},a.find((function(t){return t.id===e.id})))}))})})),i(s);case 9:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}(),z=Object(c.useMemo)((function(){return"all"===D?n:n.filter((function(e){return e.type===D}))}),[D,n]),A=Object(c.useCallback)((function(e){var t=r.map((function(t){return e.id!==t.id?t:Object(l.a)(Object(l.a)({},e),e.toppings)}));o(t)}),[r]);Object(c.useEffect)((function(){T()}),[]);var E=Object(c.useCallback)((function(e){o((function(t){return 0===t.length?[].concat(Object(u.a)(t),[Object(l.a)(Object(l.a)({},e),{},{toppings:e.toppings.map((function(e){return Object(l.a)({},e)})),quantity:1})]):t.some((function(t){return t.id===e.id}))?t.map((function(t){return t.id!==e.id?t:Object(l.a)(Object(l.a)({},e),{},{toppings:e.toppings.map((function(e){return Object(l.a)({},e)})),quantity:t.quantity+1})})):[].concat(Object(u.a)(t),[Object(l.a)(Object(l.a)({},e),{},{toppings:e.toppings.map((function(e){return Object(l.a)({},e)})),quantity:1})])}))}),[g]),F=Object(c.useCallback)((function(e){o(r.map((function(t){return e.id===t.id?Object(l.a)(Object(l.a)(Object(l.a)({},t),t.toppings),{},{quantity:t.quantity-1}):t})))}),[r]),Q=Object(c.useCallback)((function(e){o(r.map((function(t){return e.id===t.id?Object(l.a)(Object(l.a)(Object(l.a)({},t),t.toppings),{},{quantity:t.quantity+1}):t})))}),[r]),_=Object(c.useCallback)((function(e){o((function(t){return t.filter((function(t){return t.id!==e.id}))}))}),[]);return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(x,{}),Object(h.jsxs)(O.c,{children:[Object(h.jsx)(O.a,{path:"/",exact:!0,children:Object(h.jsx)(f,{filterType:D,filterHandler:S,products:z,onProductAdd:E})}),Object(h.jsx)(O.a,{path:"/addings",children:0!==r.length&&Object(h.jsx)(C,{userOrder:r,onOrderChange:A,onDelete:_})}),Object(h.jsx)(O.a,{path:"/bucket",children:0===r.length?Object(h.jsx)(y,{}):Object(h.jsx)(v,{userOrder:r,onDecreaseQuantity:F,onIncreaseQuantity:Q,onDelete:_,onReset:o})})]})]})};s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(r.a,{children:Object(h.jsx)(D,{})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.5005e536.chunk.js.map